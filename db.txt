create database my_cake_test;
grant all on my_cake_test.* to awsphpuser@172.31.87.120 identified by "48hfsAo2";
use  my_cake_test;

create table posts(
	id int unsigned auto_increment primary key,
	title varchar(255),
	body text,
	created datetime default null,
	modified datetime default null
);
insert into posts(title,body,created) values
('title 1', 'body 1', now()),
('title 2', 'body 2', now()),
('title 3', 'body 3', now());
select * from posts;



sudo mysql -h phpmyweb.c0gqtr0mbveo.us-east-1.rds.amazonaws.com -u dbuser -p


※ユーザにdbuserは使わない　rootユーザとかぶるから

ユーザ調べる
SELECT user,host,password FROM mysql.user;


※日本語化

https://qiita.com/kijitora-neko/items/aab58b4c1f684353e075

ダメなときは以下のコマンドを実行

ALTER DATABASE my_cake_test default character set utf8;
set character_set_client = utf8;
set character_set_connection = utf8;
set character_set_database = utf8;
set character_set_results = utf8;
set character_set_server  = utf8;
ALTER TABLE posts CONVERT TO CHARACTER SET UTF8;
ALTER TABLE comments CONVERT TO CHARACTER SET UTF8;



・チャット

create database chat_db;
use chat_db;

create table users(
	id int unsigned auto_increment primary key NOT NULL,
	name varchar(20) NOT NULL,
	password varchar(60) NOT NULL,
    created datetime NOT NULL
);
desc users;

create table rooms(
	id int unsigned auto_increment primary key NOT NULL,
	name varchar(20) NOT NULL,
	created datetime DEFAULT NULL
);


create table room_user(
	id int unsigned auto_increment primary key NOT NULL,
	room_id  int unsigned  NOT NULL,
	user_id int unsigned  NOT NULL,
	token varchar(255)  NOT NULL,
    foreign key(room_id) references rooms(id),
    foreign key(user_id) references users(id)
);
create table comments(
	id int unsigned auto_increment primary key NOT NULL,
	room_id  int unsigned  NOT NULL,
	user_id int unsigned  NOT NULL,
	message text  NOT NULL,
    foreign key(room_id) references rooms(id),
    foreign key(user_id) references users(id)
);
